!function(){var e=algoliasearch("Y4PFTTJ91H","13cb82a358f97cd95f3321f14d6c3e44").initIndex("stripe-docs"),t=document.querySelector(".search"),n=t.querySelector("input"),i=t.querySelector(".search-text"),r=document.querySelector(".search-results"),o=document.querySelector(".search-after-text--no-results"),c=r.querySelector(".results"),s=!1,d=debounce(m,100),l=0,a=null,u={query:"",selectedIndex:0};function h(){void 0!==window.sessionStorage&&(sessionStorage.setItem("docs-search-query",u.query),sessionStorage.setItem("docs-search-index",u.selectedIndex))}function p(e){if(40===e.keyCode)u.selectedIndex<l-1&&(u.selectedIndex+=1,h(),v()),e.preventDefault();else if(38===e.keyCode)u.selectedIndex>0&&(u.selectedIndex-=1,h(),v()),e.preventDefault();else if(13===e.keyCode){var n=c.querySelector("li.selected a");n&&(t.dispatchEvent(new Event("openSearchResult")),f(),page.openURL(n),e.preventDefault())}}function y(){s||(s=!0,document.addEventListener("keydown",p),overlayController.show(f),r.style.visibility="visible",t.style.width="600px",dynamics.animate(r,{opacity:1},{type:dynamics.easeInOut,friction:350,duration:250}),u.selectedIndex=0,h(),v())}function f(){s&&(s=!1,document.removeEventListener("keydown",p),t.style.width="400px",overlayController.hide(),dynamics.animate(r,{opacity:0},{type:dynamics.easeInOut,duration:250,complete:function(){r.style.visibility="hidden"}}))}function m(t,n){if(t!==a){if(/[0-9-\s]{12,20}/.test(t)||t.indexOf("sk_")>-1)return l=0,void x([]);a=t,e.search(t,{attributesToHighlight:"hierarchy,content",highlightPreTag:"[h]",highlightPostTag:"[/h]",hitsPerPage:10},function(e,t){if(!e){var i={},r=t.hits.filter(function(e){var t=parseURL(e.url);return i[t.pathname]=!0,!0}),o=["recipes","more recipes","next steps","next up","up next"],c=r.map(function(e){for(var t=Object.keys(e._highlightResult.hierarchy).sort(),n="",i="",r=t.length-1;r>0;r--){var c=e._highlightResult.hierarchy[t[r]];c&&(c=c.value),c&&i!==c&&-1===o.indexOf(c.toLowerCase())&&(n.length>0&&(n=" â€º "+n),n=c+n,i=c)}var s=parseURL(e.url);return{title:n,url:s.pathname+("#content"===s.hash?"":s.hash),content:e._highlightResult.content&&e._highlightResult.content.value,type:"page",declaration:""}});n||(u.selectedIndex=0,h()),x(c)}})}}function v(){var e=c.querySelector("li.selected")||c.querySelector("li:first-child");if(e){e.classList.remove("selected"),(e=c.querySelector("li:nth-child("+(u.selectedIndex+1)+")")).classList.add("selected");var t=e.getBoundingClientRect(),n=t.top-12,i=t.top+t.height+12;0===u.selectedIndex?document.body.scrollTop=0:n<0?document.body.scrollTop=document.body.scrollTop+n:i>=window.innerHeight&&(document.body.scrollTop=document.body.scrollTop-(window.innerHeight-i))}}function g(e){"function"==typeof DOMParser?e=(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e=$("<div/>").text(e).html();return e=(e=e.replace(/\[h\]/g,"<em>")).replace(/\[\/h\]/g,"</em>")}function x(e){l=e.length;for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var i=e[n],r=document.createElement("li");n===u.selectedIndex&&r.classList.add("selected");var s,d=document.createElement("a");if(d.innerHTML=g(i.title),d.href=i.url,d.addEventListener("click",function(e){f(),page.openLink(e)}),r.appendChild(d),i.declaration)(s=document.createElement("div")).classList.add("tag"),s.classList.add("method"),s.innerText=i.declaration.replace(/http.*\/v1/,"/v1"),r.appendChild(s);if("reference"===i.type||-1!==i.url.indexOf("/docs/api"))(s=document.createElement("div")).classList.add("api-reference"),r.appendChild(s);if(i.content){var a=document.createElement("p");a.innerHTML=g(i.content),r.appendChild(a)}t.appendChild(r)}c.innerHTML="",c.appendChild(t),o.style.visibility=0===l?"visible":""}!function(){if(void 0!==window.sessionStorage){var e=sessionStorage.getItem("docs-search-query"),t=sessionStorage.getItem("docs-search-index")||0;e&&(u.query=e,u.selectedIndex=t,n.value=u.query,i.textContent=u.query,m(u.query,!0)),document.addEventListener("keyup",function(e){if((191==e.keyCode||83==e.keyCode)&&!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLSelectElement))return n.focus(),n.select(),!1})}}(),n.addEventListener("keyup",function(){var e=n.value;u.query!==e&&(u.query=e,i.textContent=e,o.style.visibility="",h(),e.length>0?(y(),d(e)):f())}),n.addEventListener("focus",function(){n.value.length>0&&y(),n.select()}),c.addEventListener("mousedown",function(e){for(var t=e.target;t&&"LI"!==t.tagName;)t=t.parentNode;if(t){var n=t.parentNode.children;n=Array.prototype.slice.call(n,this),u.selectedIndex=n.indexOf(t),h(),v()}})}();