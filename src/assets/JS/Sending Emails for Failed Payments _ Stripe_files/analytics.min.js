/*! stripe analytics.js 2019-05-20 */
"use strict";window.Stripelytics=window.Stripelytics||function(){var e={empty_config:"You called `Analytics.configure` without any arguments.",empty_snake_case:"An empty string was passed to toSnakeCase, implying an empty event name.",event_with_no_viewed:"An event was called, but no viewed_name, or previous view call found.",id_mismatch:"A different ID exists in cookies vs. localStorage",json_stringify_error:"JSON.stringify threw an error when it was invoked. Ensure it exists.",missing_merchant_token:"A track function was called with a user token but no merchant token.",no_previous_event_id:"The previous event id was requested but an analytics call has not been made yet.",pixel_onerror_event:"A tracking pixel threw an error event.",pixel_thrown_error:"An error was thrown while trying to inject a pixel into the page.",unable_to_set_cookie_data:"An error was thrown while setting additional cookie information from config."},t={},n={track:{},viewed:{},modal:{},action:{},link:{}},r={piiParams:["name","firstname","lastname","nickname","address","gender","p","e","profileurl","prefill_email","pwd","fname","lname","user","location","query","stripe_user[email]","prefill_email","client_id","stripe_user[first_name]","stripe_user[last_name]","description","shipping.phone","stripe_user[phone_number]","stripe_user[dob_day]","stripe_user[dob_month]","stripe_user[dob_year]","stripe_user[street_address]","stripe_user[city]","stripe_user[state]","stripe_user[zip]","stripe_user[country]","shipping.address[address]","shipping.address[address-line2]","shipping.address[locality]","shipping.address[subregion]","shipping.address[zip]","shipping.address[country]"],paramReplaceText:"[REDACTED]",EMAIL_REPLACEMENT_PATTERN:/([a-zA-Z0-9\-.+_-`~!#$%^&*()]+(@|%40|%2540)[a-zA-Z0-9\-.+_-`~!#$%^&*()]+\.[a-zA-Z0-9.+_-`~!#$%^*()]+)/gi,EMAIL_PATTERN:/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,pagePathScrubber:function(e,t,n){var i=e,a=i.split("?"),o=a[0],s=a.length>1?i.replace(o,"").substring(1):"";return i=o+function(e,t,n){var i=e.split(/[&;]/),a=[],o="";if(""===e)return"";for(var s=0;s<i.length;s++){for(var c=i[s].split("="),l=c[0],u=c[1],g=!0,d=0;d<t.length;d++)(l.toLowerCase()===t[d]||function(e){return r.EMAIL_PATTERN.test(e)}(l))&&(g=!1);g?a.push({name:l,value:u,index:s}):a.push({name:l,value:n,index:s})}if(a.length<1)return o;for(var p=0;p<a.length;p++)o+=a[p].name,i[a[p].index].indexOf("=")>-1&&(o+="=",o+=a[p].value),p!==a.length-1&&(o+="&");return"?"+o}(s,t,r.paramReplaceText),i=function(e,t){return e.replace(r.EMAIL_REPLACEMENT_PATTERN,t)}(i,n)},cleanPagePath:function(e){if(e)return r.pagePathScrubber(e,r.piiParams,r.paramReplaceText)},setupScrubber:function(e){e&&e(function(e){e&&e.set("customTask",function(e){var t=e.get("location"),n=e.get("page")||void 0,i=e.get("referrer")||void 0;e.set("location",r.cleanPagePath(t)),e.set("page",r.cleanPagePath(n)),e.set("referrer",r.cleanPagePath(i))})})}},i={warn:function(n,r){if(window.location.hostname.match(/(^|\.)stripe\.com$/))return!1;n in t||!window.console||!window.console.warn||(t[n]=!0,window.console.warn("Stripe Analytics: "+(e[n]||n),r))},toSnakeCase:function(e){var t=/[\s\W_]/,n=/^[\s\W_]*/,r=/[\s\W_]*$/,a=/(.)([A-Z][a-z]+)/g,o=/([a-z0-9])([A-Z])/g,s=/[\s\W_]+(.|$)/g;if(!e)return i.warn("empty_snake_case"),e;var c=e;return c=c.replace(n,""),c=c.replace(r,""),t.test(c)?c.replace(s,function(e,t){return t?"_"+t:""}).toLowerCase():(c=c.replace(a,function(e,t,n){return t+"_"+n}),c.replace(o,function(e,t,n){return t+"_"+n}).toLowerCase())},toQueryString:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if("object"==typeof r)try{r=JSON.stringify(r)}catch(e){throw i.warn("json_stringify_error",e),e}t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(r)}return t.replace("&","?")},objAssign:function(){function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;return Object.assign||function(r){for(var i=void 0,a=e(r),o=void 0,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var c in i)t.call(i,c)&&(a[c]=i[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(i);for(var l=0;l<o.length;l++)n.call(i,o[l])&&(a[o[l]]=i[o[l]])}}return a}}(),injectGoogleAnalytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i._googleAnalyticsIsPresent()||function(e,t,n,r,i,a,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o)}(window,document,"script",0,"ga");var t={legacyCookieDomain:".stripe.com"};window.ga("create","UA-12675062-1",t),r.setupScrubber(window.ga),window.ga("require","displayfeatures"),e.ga&&void 0!==e.ga.isLoggedIn&&window.ga("set","dimension1",String(e.ga.isLoggedIn)),e.flags&&window.ga("set","dimension2",i.stringifyFlags(e.flags)),window.ga("send","pageview")},stringifyFlags:function(e){if("object"!=typeof e)return"";var t=[];for(var n in e)!0===e[n]&&t.push(n);return t.join(",")},generateID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},getCookie:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var r=t[n],i=r.indexOf("="),a=decodeURIComponent(r.substr(0,i)),o=decodeURIComponent(r.substr(i+1));if(a===e)return o}return null},setCookie:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{domain:""},r=void 0,i=void 0;!0===n.expires&&(n.expires=-1);var a=n.expires;"number"==typeof a&&(r=new Date,r.setTime(r.getTime()+24*a*60*60*1e3),n.expires=r),null===n.path&&(n.path="/");var o=(""+t).replace(/[^!#-+\--:<-[\]-~]/g,encodeURIComponent);i=encodeURIComponent(e)+"="+o,n.expires&&n.expires instanceof Date&&(i+=";expires="+n.expires.toUTCString()),n.path&&(i+=";path="+n.path),n.domain&&(i+=";domain="+n.domain),document.cookie=i},_googleAnalyticsIsPresent:function(){return window.hasOwnProperty("ga")&&"function"==typeof window.ga||document.querySelectorAll('script[src="https://www.google-analytics.com/analytics.js"]').length>0},_getCookieID:function(){try{return i.getCookie("cid")||null}catch(e){return null}},_getLocalStorageID:function(){try{return window.localStorage.getItem("lsid")||null}catch(e){return null}},_setLocalStorageID:function(e){try{window.localStorage.setItem("lsid",e)}catch(e){}},_setCookieData:function(e,t){try{var n={expires:7200,domain:""};"stripe.com"===window.location.hostname.split(".").slice(-2).join(".")&&(n.domain=".stripe.com"),i.setCookie(e,t,n)}catch(e){}},_doNotTrack:!1,getCookieAndLocalStorageID:function(){return i.getCookieID()},getCookieID:function(){if(i._doNotTrack)return"DNT";var e=i._getCookieID(),t=i._getLocalStorageID();if(e&&t)return e;if(e&&!t)return i._setLocalStorageID(e),e;if(t&&!e)return i._setCookieData("cid",t),t;var n=i.generateID();return i._setCookieData("cid",n),i._setLocalStorageID(n),n},getLocalStorageID:function(){if(i._doNotTrack)return"DNT";var e=i._getCookieID(),t=i._getLocalStorageID();if(e&&t)return t;if(e&&!t)return i._setLocalStorageID(e),e;if(t&&!e)return i._setCookieData("cid",t),t;var n=i.generateID();return i._setCookieData("cid",n),i._setLocalStorageID(n),n},getGlobalParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t.domain=window.location.host;var n=document.location.pathname+document.location.search+document.location.hash;return t.page=e.maxPageLength?n.substr(0,e.maxPageLength):n,t.referrer=document.referrer,t.cid=i.getCookieID(),t.lsid=i.getLocalStorageID(),t.viewport_height=window.innerHeight,t.viewport_width=window.innerWidth,t.analytics_ua="analytics.js-1.6.2-8878dcc",t},getBackupViewedName:function(e,t){return t||(i.warn("event_with_no_viewed",e),document.location.pathname)},injectPixel:function(e){try{var t=new Image;t.onerror=function(){i.warn("pixel_onerror_event",e)},t.src=e}catch(e){i.warn("pixel_thrown_error",e)}},pingMirador:function(e,t){var n=function(){var e=t;i.injectPixel(e)};try{var r=window.StripeMirador||window.StripeM;r&&"function"==typeof r.b?r.b({source:"analytics-js",data:e}):n()}catch(e){n()}},setConfigCookieData:function(e){var t=["merchant","user"];try{t.forEach(function(t){var n=e[t];"string"==typeof n&&i._setCookieData(t,n)})}catch(e){i.warn("unable_to_set_cookie_data",e)}}},a=[i.injectPixel],o={configure:function(e){e||i.warn("empty_config"),this._config=i.objAssign(this._config,e),e.ga&&i.injectGoogleAnalytics(e),this._config&&i.setConfigCookieData(this._config)},_config:{},_state:{trackCounter:0},getPreviousEventId:function(){var e=this._config,t=e.pageviewtoken;return t||(t=i.generateID(),e.pageviewtoken=t,i.warn("no_previous_event_id")),t+"_"+this._state.trackCounter},track:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this._config,s=e;r||(s=i.toSnakeCase(e)),t.event=s,this._state.trackCounter+=1,t.event_count=this._state.trackCounter,o.pageviewtoken?t.page_view_id=o.pageviewtoken:(t.page_view_id=i.generateID(),o.pageviewtoken=t.page_view_id),t.event_id=t.page_view_id+"_"+this._state.trackCounter,(n.merchant||o.merchant)&&(t.merchant_id=n.merchant||o.merchant),(n.user||o.user)&&(t.merchant_id||i.warn("missing_merchant_token",s),t.user_id=n.user||o.user),t.version||!n.version&&!o.version||(t.version=n.version||o.version),(t.flags||o.flags)&&(t.flags=i.objAssign({},o.flags||{},t.flags||{})),(n.locale||o.locale)&&(t.stripe_locale=n.locale||o.locale);var c=i.getGlobalParams(o),l=i.objAssign({},c,t),u=i.toQueryString(l),g=this._rootTrackingUrl+u,d=o.overrideTrackingUrl;d&&(g=this._namedUrls.hasOwnProperty(d)?this._namedUrls[d]+u:d+u),a.forEach(function(e){e(g)});var p=this._rootTrackingUrl+"?event=failed_mirador_ping";return i.pingMirador(l,p),l},viewed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.toSnakeCase(e);return t.viewed_name=r,this._state.lastViewedEventName=r,this.track(r+".viewed",t,n,!0)},modal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.toSnakeCase(e);return t.modal_name=r,t.viewed_name||(t.viewed_name=i.getBackupViewedName(e,this._state.lastViewedEventName)),this._state.lastModalEventName=r,this.track(r+".modal",t,n,!0)},action:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.toSnakeCase(e);return t.action_name=r,t.viewed_name||(t.viewed_name=i.getBackupViewedName(e,this._state.lastViewedEventName)),this.track(i.toSnakeCase(e)+".action",t,n,!0)},link:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.toSnakeCase(e);return t.link_name=r,t.viewed_name||(t.viewed_name=i.getBackupViewedName(e,this._state.lastViewedEventName)),this.track(i.toSnakeCase(e)+".link",t,n,!0)},trackOnce:function(e){if(!n.track[e]){n.track[e]=!0;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.track.apply(this,[e].concat(r))}},viewedOnce:function(e){if(!n.viewed[e]){n.viewed[e]=!0;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.viewed.apply(this,[e].concat(r))}},modalOnce:function(e){if(!n.modal[e]){n.modal[e]=!0;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.modal.apply(this,[e].concat(r))}},actionOnce:function(e){if(!n.action[e]){n.action[e]=!0;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.action.apply(this,[e].concat(r))}},linkOnce:function(e){if(!n.link[e]){n.link[e]=!0;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.link.apply(this,[e].concat(r))}},_overrideTrackingFunction:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a.push(e):a=[e]},_rootTrackingUrl:"https://q.stripe.com/",_namedUrls:{internal:"https://t.stripe.com/"},Helpers:{Page:{getName:function(){}}}};return o.__Util=i,o.__PiiScrubber=r,o}(),window.Analytics=window.Analytics||window.Stripelytics;
//# sourceMappingURL=analytics.min.js.map